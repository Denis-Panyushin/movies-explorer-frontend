{"ast":null,"code":"const urlMain = 'https://api.moviesdiplompanu.nomorepartiesxyz.ru';\nconst token = localStorage.getItem('token');\n\nconst checkResponse = response => {\n  if (response.ok) {\n    return response.json();\n  }\n\n  return Promise.reject(`Ошибка ${response.status}`);\n};\n\nexport const register = (name, email, password) => {\n  return fetch(`${urlMain}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email,\n      password: password\n    })\n  }).then(res => {\n    return res;\n  }).then(res => checkResponse(res));\n};\nexport const login = (email, password) => {\n  return fetch(`${urlMain}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password\n    })\n  }).then(res => checkResponse(res)).then(data => {\n    if (data) {\n      localStorage.setItem('token', data.token);\n      return data;\n    } else {\n      return;\n    }\n  });\n};\nexport const checkToken = jwt => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    }\n  }).then(data => data).then(res => checkResponse(res));\n};\nexport const logout = email => {\n  return fetch(`${urlMain}/signout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email\n    })\n  }).then(res => checkResponse(res));\n};\nexport const getUserInfo = () => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    }\n  }).then(res => checkResponse(res));\n};\nexport const setUserInfo = (name, email) => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email\n    })\n  }).then(res => checkResponse(res));\n};\nexport const getUserMovies = () => {\n  return fetch(`${urlMain}/movies`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    }\n  }).then(res => checkResponse(res));\n};\nexport const createMovie = _ref => {\n  let {\n    country,\n    director,\n    duration,\n    year,\n    description,\n    image,\n    trailerLink,\n    thumbnail,\n    movieId,\n    nameRU,\n    nameEN\n  } = _ref;\n  return fetch(`${urlMain}/movies`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      country: country,\n      director: director,\n      duration: duration,\n      year: year,\n      description: description,\n      image: image,\n      trailerLink: trailerLink,\n      thumbnail: thumbnail,\n      movieId: movieId,\n      nameRU: nameRU,\n      nameEN: nameEN\n    })\n  }).then(res => checkResponse(res));\n};\nexport const deleteMovie = movieId => {\n  return fetch(`${urlMain}/movies/${movieId}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(res => checkResponse(res));\n};","map":{"version":3,"names":["urlMain","token","localStorage","getItem","checkResponse","response","ok","json","Promise","reject","status","register","name","email","password","fetch","method","headers","body","JSON","stringify","then","res","login","data","setItem","checkToken","jwt","logout","getUserInfo","setUserInfo","getUserMovies","createMovie","country","director","duration","year","description","image","trailerLink","thumbnail","movieId","nameRU","nameEN","deleteMovie"],"sources":["C:/Users/panyushin/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["const urlMain = 'https://api.moviesdiplompanu.nomorepartiesxyz.ru';\nconst token = localStorage.getItem('token');\n\nconst checkResponse = (response) => {\n  if (response.ok) {\n    return response.json()\n  }\n  return Promise.reject(`Ошибка ${response.status}`)\n};\n\nexport const register = (name, email, password) => {\n  return fetch(`${urlMain}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email,\n      password: password\n    })\n  })\n  .then((res) => {\n    return res;\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const login = (email, password) => {\n  return fetch(`${urlMain}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password\n    })\n  })\n  .then((res) => checkResponse(res))\n  .then((data) => {\n    if(data) {\n      localStorage.setItem('token', data.token);\n      return data;\n    } else {\n      return;\n    }\n  })\n};\n\nexport const checkToken = (jwt) => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    }\n  })\n  .then(data => data)\n  .then((res) => checkResponse(res))\n};\n\nexport const logout = (email) => {\n  return fetch(`${urlMain}/signout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const getUserInfo = () => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const setUserInfo = (name, email) => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const getUserMovies = () => {\n  return fetch(`${urlMain}/movies`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const createMovie = ({\n    country,\n    director,\n    duration,\n    year,\n    description,\n    image,\n    trailerLink,\n    thumbnail,\n    movieId,\n    nameRU,\n    nameEN\n  }) => {\n  return fetch(`${urlMain}/movies`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      country: country,\n      director: director,\n      duration: duration,\n      year: year,\n      description: description,\n      image: image,\n      trailerLink: trailerLink,\n      thumbnail: thumbnail,\n      movieId: movieId,\n      nameRU: nameRU,\n      nameEN: nameEN,\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const deleteMovie = (movieId) => {\n  return fetch(`${urlMain}/movies/${movieId}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
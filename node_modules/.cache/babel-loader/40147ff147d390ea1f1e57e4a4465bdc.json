{"ast":null,"code":"import _slicedToArray from\"C:/Users/panyushin/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useLocation}from'react-router-dom';import useFormWithValidation from'../../hooks/useFormWithValidation';import'./SearchForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchForm(props){var location=useLocation();var _useFormWithValidatio=useFormWithValidation(),values=_useFormWithValidatio.values,handleChange=_useFormWithValidatio.handleChange,errors=_useFormWithValidatio.errors,isValid=_useFormWithValidatio.isValid,setValues=_useFormWithValidatio.setValues;var name=values.name;var localCheked=localStorage.getItem('isShort')==='true';var _React$useState=React.useState(localCheked),_React$useState2=_slicedToArray(_React$useState,2),checked=_React$useState2[0],setChecked=_React$useState2[1];function handleSubmit(e){e.preventDefault();isValid&&!props.isLoading&&props.getMoviesList(name,checked);}function _onChange(event){var isShortFilms=event.target.checked;setChecked(isShortFilms);if(location.pathname==='/movies'){props.getMoviesList(props.defaultValue,!checked);}else if(location.pathname==='/saved-movies'){props.handleToggleShortMovies({checked:checked});}}React.useEffect(function(){if(location.pathname==='/movies'){setValues({name:props.defaultValue});props.getMoviesList(props.defaultValue,checked);}},[location]);return/*#__PURE__*/_jsx(\"section\",{className:\"search-movies section-movies\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-movies__container\",children:[/*#__PURE__*/_jsxs(\"form\",{noValidate:true,className:\"search-movies__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"search-movies__input\",type:\"text\",name:\"name\",placeholder:\"\\u0424\\u0438\\u043B\\u044C\\u043C\",maxLength:\"60\",onChange:handleChange,value:name||'',autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-movies__button\",type:\"submit\",disabled:!isValid,children:\"\\u041D\\u0430\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"search-movies__input-error\",children:errors.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-ckeckbox\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-checkbox__label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"filter-checkbox__input\",name:\"filterCheckbox\",checked:checked,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-checkbox_visible\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"filter-checkbox__title\",children:\"\\u041A\\u043E\\u0440\\u043E\\u0442\\u043A\\u043E\\u043C\\u0435\\u0442\\u0440\\u0430\\u0436\\u043A\\u0438\"})]})]})});}","map":{"version":3,"names":["React","useLocation","useFormWithValidation","SearchForm","props","location","values","handleChange","errors","isValid","setValues","name","localCheked","localStorage","getItem","useState","checked","setChecked","handleSubmit","e","preventDefault","isLoading","getMoviesList","onChange","event","isShortFilms","target","pathname","defaultValue","handleToggleShortMovies","useEffect"],"sources":["C:/Users/panyushin/dev/movies-explorer-frontend/src/components/SearchForm/SearchForm.js"],"sourcesContent":["import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport useFormWithValidation from '../../hooks/useFormWithValidation';\nimport './SearchForm.css';\n\nexport default function SearchForm(props) {\n  const location = useLocation();\n  const { values, handleChange, errors, isValid, setValues } = useFormWithValidation();\n  const { name } = values;\n  const localCheked = localStorage.getItem('isShort') === 'true'\n  const [checked, setChecked] = React.useState(localCheked)\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    isValid && !props.isLoading &&\n      props.getMoviesList(name, checked);\n  }\n\n  function onChange(event) {\n    const isShortFilms = event.target.checked\n    setChecked(isShortFilms)\n    if (location.pathname === '/movies') {\n      props.getMoviesList(props.defaultValue, !checked)\n    } else if (location.pathname === '/saved-movies'){\n      props.handleToggleShortMovies({checked: checked})\n    }\n  }\n\n  React.useEffect(() => {\n    if (location.pathname === '/movies') {\n      setValues({ name: props.defaultValue })\n      props.getMoviesList(props.defaultValue, checked)\n    }\n  }, [location])\n\n  return(\n    <section className='search-movies section-movies'>\n      <div className='search-movies__container'>\n        <form\n          noValidate\n          className='search-movies__form'\n          onSubmit={handleSubmit}\n        >\n          <input\n            className='search-movies__input'\n            type='text'\n            name='name'\n            placeholder='Фильм'\n            maxLength='60'\n            onChange={handleChange}\n            value={name || ''}\n            autoComplete='off'\n          />\n          <button\n            className='search-movies__button'\n            type='submit'\n            disabled={!isValid}\n          >\n            Найти\n          </button>\n        </form>\n        <span className='search-movies__input-error'>{errors.name}</span>\n        <div className='filter-ckeckbox'>\n      <label className='filter-checkbox__label'>\n        <input\n          type='checkbox'\n          className='filter-checkbox__input'\n          name='filterCheckbox'\n          checked={checked}\n          onChange={(e) => onChange(e)}\n        />\n        <span className='filter-checkbox_visible'></span>\n      </label>\n      <p className='filter-checkbox__title'>Короткометражки</p>\n    </div>\n      </div>\n    </section>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
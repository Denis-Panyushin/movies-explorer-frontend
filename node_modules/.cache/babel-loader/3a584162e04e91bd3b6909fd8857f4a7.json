{"ast":null,"code":"var urlMain='https://api.moviesdiplompanu.nomorepartiesxyz.ru';var checkResponse=function checkResponse(response){if(response.ok){return response.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(response.status));};export var register=function register(name,email,password){return fetch(\"\".concat(urlMain,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,email:email,password:password})}).then(function(res){return res;}).then(function(res){return checkResponse(res);});};export var login=function login(email,password){return fetch(\"\".concat(urlMain,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(function(res){return checkResponse(res);}).then(function(data){if(data){localStorage.setItem('token',data.token);return data;}else{return;}});};export var checkToken=function checkToken(jwt){return fetch(\"\".concat(urlMain,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(function(data){return data;}).then(function(res){return checkResponse(res);});};export var logout=function logout(email){return fetch(\"\".concat(urlMain,\"/signout\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email})}).then(function(res){return checkResponse(res);});};export var getUserInfo=function getUserInfo(){return fetch(\"\".concat(urlMain,\"/users/me\"),{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-type':'application/json'}}).then(function(res){return checkResponse(res);});};export var setUserInfo=function setUserInfo(name,email){return fetch(\"\".concat(urlMain,\"/users/me\"),{method:'PATCH',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-type':'application/json'},body:JSON.stringify({name:name,email:email})}).then(function(res){return checkResponse(res);});};export var getUserMovies=function getUserMovies(){return fetch(\"\".concat(urlMain,\"/movies\"),{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-type':'application/json'}}).then(function(res){return checkResponse(res);});};export var createMovie=function createMovie(_ref){var country=_ref.country,director=_ref.director,duration=_ref.duration,year=_ref.year,description=_ref.description,image=_ref.image,trailerLink=_ref.trailerLink,thumbnail=_ref.thumbnail,movieId=_ref.movieId,nameRU=_ref.nameRU,nameEN=_ref.nameEN;return fetch(\"\".concat(urlMain,\"/movies\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-type':'application/json'},body:JSON.stringify({country:country,director:director,duration:duration,year:year,description:description,image:image,trailerLink:trailerLink,thumbnail:thumbnail,movieId:movieId,nameRU:nameRU,nameEN:nameEN})}).then(function(res){return checkResponse(res);});};export var deleteMovie=function deleteMovie(movieId){return fetch(\"\".concat(urlMain,\"/movies/\").concat(movieId),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(function(res){return checkResponse(res);});};","map":{"version":3,"names":["urlMain","checkResponse","response","ok","json","Promise","reject","status","register","name","email","password","fetch","method","headers","body","JSON","stringify","then","res","login","data","localStorage","setItem","token","checkToken","jwt","getItem","logout","getUserInfo","setUserInfo","getUserMovies","createMovie","country","director","duration","year","description","image","trailerLink","thumbnail","movieId","nameRU","nameEN","deleteMovie"],"sources":["C:/Users/panyushin/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["const urlMain = 'https://api.moviesdiplompanu.nomorepartiesxyz.ru';\n\nconst checkResponse = (response) => {\n  if (response.ok) {\n    return response.json()\n  }\n  return Promise.reject(`Ошибка ${response.status}`)\n};\n\nexport const register = (name, email, password) => {\n  return fetch(`${urlMain}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email,\n      password: password\n    })\n  })\n  .then((res) => {\n    return res;\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const login = (email, password) => {\n  return fetch(`${urlMain}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password\n    })\n  })\n  .then((res) => checkResponse(res))\n  .then((data) => {\n    if(data) {\n      localStorage.setItem('token', data.token);\n      return data;\n    } else {\n      return;\n    }\n  })\n};\n\nexport const checkToken = (jwt) => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    }\n  })\n  .then(data => data)\n  .then((res) => checkResponse(res))\n};\n\nexport const logout = (email) => {\n  return fetch(`${urlMain}/signout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const getUserInfo = () => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${localStorage.getItem('token')}`,\n      'Content-type': 'application/json'\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const setUserInfo = (name, email) => {\n  return fetch(`${urlMain}/users/me`, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': `Bearer ${localStorage.getItem('token')}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const getUserMovies = () => {\n  return fetch(`${urlMain}/movies`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${localStorage.getItem('token')}`,\n      'Content-type': 'application/json'\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const createMovie = ({\n    country,\n    director,\n    duration,\n    year,\n    description,\n    image,\n    trailerLink,\n    thumbnail,\n    movieId,\n    nameRU,\n    nameEN\n  }) => {\n  return fetch(`${urlMain}/movies`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${localStorage.getItem('token')}`,\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      country: country,\n      director: director,\n      duration: duration,\n      year: year,\n      description: description,\n      image: image,\n      trailerLink: trailerLink,\n      thumbnail: thumbnail,\n      movieId: movieId,\n      nameRU: nameRU,\n      nameEN: nameEN,\n    })\n  })\n  .then((res) => checkResponse(res))\n};\n\nexport const deleteMovie = (movieId) => {\n  return fetch(`${urlMain}/movies/${movieId}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    }\n  })\n  .then((res) => checkResponse(res))\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}